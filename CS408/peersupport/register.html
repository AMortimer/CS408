<!DOCTYPE html>
<html>
    <head>
        <title>Register</title>
        <meta charset="UTF-8">
     <!--   <link type="text/css" rel="stylesheet" href="SPSStylesheet.css"/> -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0, 
              maximum-scale=1.0, user-scalable=no">
        <meta name="mobile-web-app-capable" content="yes"/>
        <meta name="apple-mobile-web-app-capable" content="yes" />    
    </head>
    <body>
        <script>
            function addNewUser() {
                var username = document.getElementById("username").value,
                    name = document.getElementById("name").value,
                    password = document.getElementById("password").value,
                    confirm = document.getElementById("confirm").value;
                            
            if (username.length === 0) {
                    console.log("nousername");
                    window.alert("Please provide a username");
            //        window.location.href = "register.html";
                } 
                else if (name.length === 0) {
                    console.log("noname");
                    window.alert("Please provide your name.");
              //      window.location.href = "register.html";
                    }
                else if (password.length < 6) {
                    console.log("password too short");
                    window.alert("Password must be at least 6 characters.");
              //      window.location.href = "register.html";
                } 
                else if (password !== confirm) {
                    console.log("notsamepass");
                    window.alert("Password does not match confirmation.");
               //     window.location.href = "register.html";
                } 
                
                else {
                    console.log("password fine");
                var registerInfo = "{ \"username\" : \"" + username + "\" , \"name\" : \"" + name + "\" , \"password\" : \"" + password + "\" , \"confirm\" : \"" + confirm + "\"}";
                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function() {

                    if (xhr.readyState === 4) {
                        if (xhr.status === 200) {
                           window.location.href = "home.php ";
                           console.log(username);
                        }
                        else {
                            console.log(xhr.responseText);
                            console.log('else');
                        }
                    }
                };
                console.log('here');
                xhr.open('post', 'registration.php', true);
                xhr.send(registerInfo);
            }
        }
        </script>
        <div class ="home">
            <a href="home.php" class="homeBtn">Home</a>
        </div>
        <div class="toolbar">
        <a href="forum.php" class="btn">Forum</a>
        <a href="chat.html" class="btn">Chat</a>
        <a href="about.html" class="btn">Help</a>
        </div>
        <div id="SignUp">
                    <strong>University username:</strong>
                    <input id="username" type="text" required/><br>
                    <strong>Name:</strong>
                    <input id="name" type="text" required/><br>
                    <strong>Password:</strong>
                    <input id="password" type="password" required/>
                    (minimum 6 characters)<br>
                    <strong>Confirm:</strong>
                    <input id="confirm" type="password" required/><br>
                    <button id="submit" onclick="addNewUser()" >Submit</button>
                    <input type="reset" value="Reset" />
        </div>    
    </body>
</html>